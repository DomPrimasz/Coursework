<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Profile</title>


    <script>
        "use strict"

        function pageLoad() {
            console.log("Invoked pageLoad()");

            getUserName();

        }

        function getUserName() {
            console.log("Invoked getUserName()");
            const url = "/user/name";

            fetch(url, {
                method: "GET"
                //credentials: "include"            // doens't look like you even need this....????
            }).then(response => {                       //returns a promise
                return response.text();                 //now return that promise to text
            }).then(response => {
                if (response.startsWith("Error")) {   //checks if response from server has a key "Error:"
                    alert(response);
                } else {

                    console.log(response.toString());
                    document.getElementById("userName").innerHTML = response;           //otherwise put response on page in firstName div
                }
            })
        }
    </script>
</head>
<body class="center" onload="pageLoad()">
Welcome <span id="userName"> </span>! <br>
<br>

</body>
</html>